{"version":3,"sources":["components/Names.js","components/Filter.js","components/PersonDisplay.js","components/AddBtn.js","services/persons.js","components/Message.js","components/ErrorMsg.js","index.js"],"names":["Names","names","delName","name","number","onClick","Filter","props","value","filter","onChange","PersonDisplay","newName","handleNameEdit","newNumber","handleNumberEdit","AddBtn","onSubmit","addName","type","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Message","message","className","ErrorMsg","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","errMessage","setErrMessage","searchFilter","person","toLowerCase","includes","useEffect","console","log","personService","initial","event","target","preventDefault","nameObject","some","el","conf","window","confirm","repl","find","ex","updated","setTimeout","catch","error","returned","concat","map","key","deleted","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.51183764.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n const Names = ({ names, delName }) => {\r\n   \r\n    return (\r\n   <p> {names.name} {names.number} <button onClick={delName}>delete</button></p>\r\n    \r\n    )\r\n  }\r\n\r\n  export default Names","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n    <div>\r\n        search name: <input value={props.filter}\r\n        onChange={props.onChange}/>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonDisplay = (props) => {\r\n    return (\r\n    <form>\r\n    <div>name: <input value={props.newName}\r\n        onChange={props.handleNameEdit}/></div>\r\n    <div>number: <input value={props.newNumber}\r\n        onChange={props.handleNumberEdit}/>\r\n    </div>\r\n    </form>\r\n    )\r\n}\r\n\r\nexport default PersonDisplay","import React from 'react'\r\n\r\nconst AddBtn = (props) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={props.addName}>   \r\n            <button type=\"submit\">add</button></form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddBtn","import axios from 'axios'\r\n//const baseUrl = 'http://localhost:3000/persons'   //Use one or the other\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, remove, update }","import React from 'react'\r\n\r\nconst Message = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"success\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\nexport default Message","import React from 'react'\r\n\r\nconst ErrorMsg = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n      }\r\n    \r\n    return (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ErrorMsg","import React, {useState, useEffect} from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport Names from './components/Names'\r\nimport Filter from './components/Filter'\r\nimport PersonDisplay from './components/PersonDisplay'\r\nimport AddBtn from './components/AddBtn'\r\nimport personService from './services/persons'\r\nimport Message from './components/Message'\r\nimport ErrorMsg from './components/ErrorMsg'\r\n\r\n\r\nconst App = () => {\r\n  \r\n  const [ persons, setPersons ] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber] = useState('')\r\n  const [ filter, setFilter] = useState('')\r\n  const [ message, setMessage] = useState(null)\r\n  const [ errMessage, setErrMessage] = useState(null)\r\n\r\n  /*{ name: 'Arto Hellas', number: '040-123456' },\r\n  { name: 'Ada Lovelace', number: '39-44-5323523' },\r\n  { name: 'Dan Abramov', number: '12-43-234345' },\r\n  { name: 'Mary Poppendieck', number: '39-23-6423122' }*/ \r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    if (persons.some(el => el.name === newName))\r\n        var conf = window.confirm(`${newName} is already added to the phonebook, replace existing phone number?`)\r\n        if (conf === true) {\r\n          const repl = persons.find(ex => ex.name === newName)\r\n          personService\r\n            .update(repl.id, nameObject)\r\n            .then(updated => {\r\n              setMessage(`Succesfully replaced ${nameObject.name} phone number`)\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 3000)\r\n            setNewName(\"\")\r\n            setNewNumber(\"\")\r\n            })\r\n            .catch(error => {\r\n              setErrMessage(`Error, ${nameObject.name} already deleted from the phonebook`)\r\n              setTimeout(() => {\r\n                setErrMessage(null)\r\n              }, 3000)\r\n            })\r\n        }\r\n    else {\r\n        personService\r\n          .create(nameObject)\r\n          .then(returned => {\r\n            setPersons(persons.concat(returned))\r\n            setNewName(\"\")\r\n            setNewNumber(\"\")\r\n            setMessage(`Succesfully added ${nameObject.name} to the phonebook`)\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 3000)\r\n          })\r\n          .catch(error => {\r\n            setErrMessage(error.response.data.error)\r\n            setTimeout(() => {\r\n              setErrMessage(null)\r\n            }, 5000)\r\n          })\r\n        //console.log(\"added\", event.target) \r\n      }\r\n    }\r\n\r\n  const deleteName = (id) => {\r\n    const conf = window.confirm(`Delete ${id.name} ?`)\r\n    if (conf === true){\r\n      personService\r\n        .remove(id.id)\r\n        .then(deleted => {\r\n          setMessage(`Succesfully deleted ${id.name} from the phonebook`)\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n            }, 3000)\r\n          })\r\n        .catch(error => {\r\n          setErrMessage(`Error, ${id.name} already deleted from the phonebook`)\r\n          setTimeout(() => {\r\n            setErrMessage(null)\r\n          }, 3000)\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleNameEdit = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberEdit = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterEdit = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n\r\n  const searchFilter = persons.filter(person => \r\n    person.name.toLowerCase().includes(filter))\r\n\r\n  const hook = () => {\r\n    console.log(\"effect\")\r\n  personService\r\n    .getAll()\r\n    .then(initial => {\r\n      console.log(\"promise fulfilled\")\r\n      setPersons(initial)\r\n    })\r\n  }\r\n\r\n  useEffect(hook, [])\r\n\r\n  return (\r\n    <div>\r\n      \r\n      <Message message = {message}/>\r\n      <ErrorMsg message = {errMessage}/>\r\n\r\n      <h1>Phonebook</h1>\r\n      \r\n      <Filter filter={filter} onChange={handleFilterEdit}></Filter>\r\n      \r\n      <div> <h2>Add name and number</h2> </div>\r\n      \r\n      <PersonDisplay newName={newName} handleNameEdit={handleNameEdit} \r\n        newNumber={newNumber} handleNumberEdit={handleNumberEdit}></PersonDisplay>\r\n      \r\n      <AddBtn addName={addName}></AddBtn>\r\n      \r\n      <h2>Numbers</h2>\r\n      \r\n        {searchFilter.map((names) =>\r\n        <Names key={names.name} names={names} delName={() => deleteName(names)}/>)}\r\n          \r\n    </div>\r\n  )\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\n\r\n"],"sourceRoot":""}